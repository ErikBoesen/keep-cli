#!/usr/bin/env python3
import argparse, application, yaml, keyring, gkeepapi, shim

parser = argparse.ArgumentParser('Keep-CLI')
parser.add_argument('--config', type=str, default='config.yml', help='Configuration file')

args = parser.parse_args()

shim.patch()

fh = open(args.config, 'r')
config = yaml.load(fh, Loader=yaml.Loader)
fh.close()

password = keyring.get_password('google-keep', config['username'])

keep = gkeepapi.Keep()
keep.login(config['username'], password)
password = None

app = application.Application(keep)
app.run()
